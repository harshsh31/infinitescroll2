{"version":3,"sources":["components/Button/Button.js","components/Button/Button.module.css","containers/Home/Home.module.css","containers/Home/Home.js"],"names":["Button","type","onClick","children","className","classes","button","module","exports","Home","dispatch","useDispatch","history","useHistory","photos","useSelector","state","loading","getPhotos","delay","timer","setTimeout","axios","get","fetchPhotos","then","res","photosActions","addPhotos","data","setLoadingPhotos","clearTimeout","useEffect","window","addEventListener","handleScroll","removeEventListener","Math","round","innerHeight","document","documentElement","scrollTop","offsetHeight","s","container","logoutContainer","userActions","addUserDetails","push","imgHolder","photosList","map","user","index","imgContactContainer","id","imgContainer","src","url","alt","title","contactDetails","controlsLoader","style","height","getElementById","centerPositionText"],"mappings":"yGAAA,iCAgBeA,IAZA,SAAC,GAA4C,IAA1CC,EAAyC,EAAzCA,KAAMC,EAAmC,EAAnCA,QAASC,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,UACzC,OACE,wBACEA,UAAS,UAAKC,IAAQC,OAAb,YAAuBF,GAAwB,IACxDH,KAAMA,GAAQ,SACdC,QAASA,EAHX,SAKGC,M,mBCVPI,EAAOC,QAAU,CAAC,OAAS,yB,mBCA3BD,EAAOC,QAAU,CAAC,UAAY,wBAAwB,UAAY,wBAAwB,oBAAsB,kCAAkC,eAAiB,6BAA6B,QAAU,sBAAsB,mBAAqB,iCAAiC,aAAe,2BAA2B,eAAiB,6BAA6B,gBAAkB,gC,gCCDhY,kGAwFeC,UA/EF,WACX,IAAMC,EAAWC,cACXC,EAAUC,cACVC,EAASC,aAAY,SAACC,GAAD,OAAWA,EAAMF,UACtCG,EAAUH,EAAOG,QACjBC,EAAY,WAAmB,IAAlBC,EAAiB,uDAAT,IACrBC,EAAQC,YAAW,WACrBC,IAAMC,IAAN,UAAaT,EAAOU,YAApB,uBAAqDC,MAAK,SAACC,GACzDhB,EAASiB,IAAcC,UAAUF,EAAIG,OACrCnB,EAASiB,IAAcG,kBAAiB,OAE1CC,aAAaX,KACZD,IAELa,qBAAU,WAIR,OAHAtB,EAASiB,IAAcG,kBAAiB,IACxCZ,EAAU,GACVe,OAAOC,iBAAiB,SAAUC,GAC3B,kBAAMF,OAAOG,oBAAoB,SAAUD,MACjD,IAEHH,qBAAU,WACHf,GACLC,MACC,CAACD,IAKJ,SAASkB,IAELE,KAAKC,MAAML,OAAOM,YAAcC,SAASC,gBAAgBC,WACzDF,SAASC,gBAAgBE,cAI3BjC,EAASiB,IAAcG,kBAAiB,IAM1C,OACE,sBAAK1B,UAAWwC,IAAEC,UAAlB,UACE,qBAAKzC,UAAWwC,IAAEE,gBAAlB,SACE,cAAC,IAAD,CAAQ7C,KAAM,SAAUC,QApBb,WACfQ,EAASqC,IAAYC,eAAe,OACpCpC,EAAQqC,KAAK,WAkBT,sBAIF,sBAAK7C,UAAWwC,IAAEM,UAAlB,UACGpC,EAAOqC,WAAWC,KAAI,SAACC,EAAMC,GAAP,OACrB,sBAEElD,UAAWwC,IAAEW,oBACbC,GAAIF,EAAQ,QAHd,UAKE,qBAAKlD,UAAWwC,IAAEa,aAAlB,SACE,qBAAKC,IAAKL,EAAKM,IAAKC,IAAKP,EAAKQ,UAEhC,qBAAKzD,UAAWwC,IAAEkB,eAAlB,SAAmCT,EAAKQ,UAPnCR,EAAKM,IAAML,MAUnBrC,GACC,qBACEb,UAAS,UAAKwC,IAAEW,oBAAP,YAA8BX,IAAEmB,gBACzCC,MAAO,CACLC,OAAQzB,SAAS0B,eAAe,UAC5B1B,SAAS0B,eAAe,UAAUvB,aAClC,QALR,SAQE,qBAAKvC,UAAWwC,IAAEuB,mBAAlB","file":"static/js/5.392b4f5d.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nimport classes from \"./Button.module.css\";\r\n\r\nconst Button = ({ type, onClick, children, className }) => {\r\n  return (\r\n    <button\r\n      className={`${classes.button} ${className ? className : \"\"}`}\r\n      type={type || \"button\"}\r\n      onClick={onClick}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__b5y9T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__330R3\",\"imgHolder\":\"Home_imgHolder__idSHP\",\"imgContactContainer\":\"Home_imgContactContainer__1GJeu\",\"controlsLoader\":\"Home_controlsLoader__2LNgo\",\"loading\":\"Home_loading__3rZ1b\",\"centerPositionText\":\"Home_centerPositionText__Q-xnB\",\"imgContainer\":\"Home_imgContainer__19uhg\",\"contactDetails\":\"Home_contactDetails__3YlWa\",\"logoutContainer\":\"Home_logoutContainer__NclSd\"};","import React, { useRef, useEffect } from \"react\";\r\nimport s from \"./Home.module.css\";\r\nimport axios from \"axios\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { photosActions } from \"../../reducers/photosReducer\";\r\nimport Button from \"../../components/Button/Button\";\r\nimport { userActions } from \"../../reducers/usersReducer\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nconst Home = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const photos = useSelector((state) => state.photos);\r\n  const loading = photos.loading;\r\n  const getPhotos = (delay = 1000) => {\r\n    let timer = setTimeout(() => {\r\n      axios.get(`${photos.fetchPhotos}?_page=0&_limit=10`).then((res) => {\r\n        dispatch(photosActions.addPhotos(res.data));\r\n        dispatch(photosActions.setLoadingPhotos(false));\r\n      });\r\n      clearTimeout(timer);\r\n    }, delay);\r\n  };\r\n  useEffect(() => {\r\n    dispatch(photosActions.setLoadingPhotos(true));\r\n    getPhotos(0);\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!loading) return;\r\n    getPhotos();\r\n  }, [loading]);\r\n  const onLogout = () => {\r\n    dispatch(userActions.addUserDetails(null));\r\n    history.push(\"/login\");\r\n  };\r\n  function handleScroll() {\r\n    if (\r\n      Math.round(window.innerHeight + document.documentElement.scrollTop) <\r\n      document.documentElement.offsetHeight\r\n    ) {\r\n      return;\r\n    }\r\n    dispatch(photosActions.setLoadingPhotos(true));\r\n  }\r\n  const loadingCSS = {\r\n    height: \"100px\",\r\n    margin: \"30px\",\r\n  };\r\n  return (\r\n    <div className={s.container}>\r\n      <div className={s.logoutContainer}>\r\n        <Button type={\"button\"} onClick={onLogout}>\r\n          Logout\r\n        </Button>\r\n      </div>\r\n      <div className={s.imgHolder}>\r\n        {photos.photosList.map((user, index) => (\r\n          <div\r\n            key={user.url + index}\r\n            className={s.imgContactContainer}\r\n            id={index + \"photo\"}\r\n          >\r\n            <div className={s.imgContainer}>\r\n              <img src={user.url} alt={user.title} />\r\n            </div>\r\n            <div className={s.contactDetails}>{user.title}</div>\r\n          </div>\r\n        ))}\r\n        {loading && (\r\n          <div\r\n            className={`${s.imgContactContainer} ${s.controlsLoader}`}\r\n            style={{\r\n              height: document.getElementById(\"0photo\")\r\n                ? document.getElementById(\"0photo\").offsetHeight\r\n                : \"auto\",\r\n            }}\r\n          >\r\n            <div className={s.centerPositionText}>Loading...</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"sourceRoot":""}